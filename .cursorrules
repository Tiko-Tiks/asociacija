# ==================================================
# PROJECT: BRANDUOLYS (Community OS)
# MODE: PRODUCTION / GOVERNANCE
# AUDIT MODE: SOFT (DOCUMENTED)
# ==================================================

You are working on an institutional governance platform.
This is NOT a startup MVP, CRUD app, or growth product.

--------------------------------------------------
CORE PHILOSOPHY (NON-NEGOTIABLE)
--------------------------------------------------

1. CONSTITUTION FIRST
- Law and procedure override convenience.
- No technical or UI logic may bypass legal constraints.
- All critical actions must be explainable, reviewable, and traceable.

2. PHYSICAL PRIMACY
- The system does NOT create legitimacy.
- The system registers decisions made in the physical world.
- Never simulate quorum, voting outcomes, or authority.

3. EXTERNAL GUARDIAN
- The platform acts as a procedural lock and auditor.
- Unilateral changes to constitutional parameters are forbidden.

--------------------------------------------------
DATA MODEL RULES
--------------------------------------------------

4. ROLES VS POSITIONS
- `role` (OWNER / MEMBER) = technical access only.
- Organizational authority is expressed ONLY via `positions`.
- Never infer real-world authority from `role`.

5. MEMBERSHIP LIFECYCLE
- Members are NEVER deleted.
- Valid lifecycle:
  PENDING → ACTIVE → SUSPENDED → LEFT
- Status changes REQUIRE:
  - explicit reason
  - audit log entry (see Audit Mode)

6. RESOLUTIONS ARE LEGAL ACTS
- Official decisions MUST use `resolutions`.
- Projects are operational artifacts, not legal decisions.
- APPROVED resolutions are immutable.

--------------------------------------------------
AUDIT & TRACEABILITY
--------------------------------------------------

7. AUDIT IS MANDATORY
- The following actions MUST attempt to write to `audit_logs`:
  - membership status change
  - position assignment
  - resolution approval / rejection
  - system configuration change

7a. AUDIT FAILURE — SOFT MODE (APPROVED)
- Audit logging is mandatory but not a transaction blocker.
- If audit insertion fails due to technical reasons:
  - the primary operation MAY succeed
  - the failure MUST be:
    - explicitly logged (console.error)
    - surfaced for monitoring / incident review
- Silent audit failures are FORBIDDEN.
- Repeated audit failures constitute a critical incident.

--------------------------------------------------
ERROR HANDLING
--------------------------------------------------

8. NO SILENT FAILS
- Errors must never be swallowed.
- RLS blocks must surface as explicit domain errors (e.g. `rls_blocked`).
- UI must reflect failure states clearly.

--------------------------------------------------
IMPLEMENTATION CONSTRAINTS
--------------------------------------------------

9. SERVER ACTIONS ONLY
- All state changes MUST go through Server Actions.
- No direct client-side inserts, updates, or deletes.
- Governance logic may NEVER live only in UI.

10. IMMUTABILITY
- Approved resolutions cannot be edited.
- Audit logs are append-only.
- Historical data must be preserved.

--------------------------------------------------
AI USAGE CONSTRAINTS
--------------------------------------------------

11. AI IS ADVISORY ONLY
- AI never decides.
- AI never auto-approves.
- AI outputs require explicit human confirmation.

--------------------------------------------------
PROHIBITIONS
--------------------------------------------------

12. FORBIDDEN ACTIONS
- No hidden admin overrides.
- No permission auto-escalation.
- No backdoors, bypass flags, or emergency shortcuts.
- Do not refactor working systems without explicit instruction.

--------------------------------------------------
DEFAULT BEHAVIOR
--------------------------------------------------

13. IF UNCERTAIN
- Ask for clarification.
- Do NOT assume intent.
- Prefer legality, safety, and traceability over UX shortcuts.

END OF RULES
